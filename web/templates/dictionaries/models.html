{% extends "base.html" %}

{% block content %}
<div class="notion-page-header">
    <h1>
        <span class="icon">üöó</span>
        –ú–æ–¥–µ–ª–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π
    </h1>
    <div class="notion-page-description">
        –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–º –º–æ–¥–µ–ª–µ–π (–ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ –º–∞—Ä–∫–∞–º –∏ —Ç–∏–ø–∞–º –¢–°)
    </div>
</div>

<!-- –§–∏–ª—å—Ç—Ä—ã -->
<div class="notion-block filters-block">
    <div class="notion-block-body">
        <form method="get" class="filters-form">
            <div class="filter-group">
                <label class="notion-label">–ú–∞—Ä–∫–∞</label>
                <select name="brand_id" class="notion-input">
                    <option value="">–í—Å–µ –º–∞—Ä–∫–∏</option>
                    {% for brand in brands %}
                    <option value="{{ brand.id }}" {% if selected_brand == brand.id %}selected{% endif %}>
                        {{ brand.name }}
                    </option>
                    {% endfor %}
                </select>
            </div>
            <div class="filter-group">
                <label class="notion-label">–¢–∏–ø –¢–°</label>
                <select name="vehicle_type_id" class="notion-input">
                    <option value="">–í—Å–µ —Ç–∏–ø—ã</option>
                    {% for vt in vehicle_types %}
                    <option value="{{ vt.id }}" {% if selected_vehicle_type == vt.id %}selected{% endif %}>
                        {{ vt.name }}
                    </option>
                    {% endfor %}
                </select>
            </div>
            <div class="filter-actions">
                <button type="submit" class="notion-button notion-button-primary">
                    <i data-feather="filter"></i> –ü—Ä–∏–º–µ–Ω–∏—Ç—å
                </button>
                <a href="{{ url_for('dictionaries.models_list') }}" class="notion-button">
                    <i data-feather="x"></i> –°–±—Ä–æ—Å–∏—Ç—å
                </a>
            </div>
        </form>
    </div>
</div>

<div class="notion-block">
    <div class="notion-block-header">
        <h2>–°–ø–∏—Å–æ–∫ –º–æ–¥–µ–ª–µ–π</h2>
        <a href="{{ url_for('dictionaries.model_create') }}" class="notion-button notion-button-primary">
            <i data-feather="plus"></i> –î–æ–±–∞–≤–∏—Ç—å –º–æ–¥–µ–ª—å
        </a>
    </div>
    <div class="notion-block-body">
        {% if models %}
        <table class="notion-table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>–ú–∞—Ä–∫–∞</th>
                    <th>–ú–æ–¥–µ–ª—å</th>
                    <th>–¢–∏–ø –¢–°</th>
                    <th>–ì–æ–¥—ã</th>
                    <th>–ê–∫—Ç–∏–≤–Ω–∞</th>
                    <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                </tr>
            </thead>
            <tbody>
                {% for model in models %}
                <tr>
                    <td>{{ model.id }}</td>
                    <td>{{ model.brand_name }}</td>
                    <td><strong>{{ model.name }}</strong></td>
                    <td>{{ model.vehicle_type_name }}</td>
                    <td>
                        {% if model.start_year or model.end_year %}
                            {{ model.start_year or '...' }} ‚Äî {{ model.end_year or '...' }}
                        {% else %}
                            ‚Äî
                        {% endif %}
                    </td>
                    <td>
                        {% if model.is_active %}
                            <span class="notion-badge notion-badge-success">–î–∞</span>
                        {% else %}
                            <span class="notion-badge">–ù–µ—Ç</span>
                        {% endif %}
                    </td>
                    <td class="actions">
                        <a href="{{ url_for('dictionaries.model_edit', model_id=model.id) }}" class="notion-button">
                            <i data-feather="edit-2"></i>
                        </a>
                        <form method="post" action="{{ url_for('dictionaries.model_delete', model_id=model.id) }}" style="display:inline;">
                            <button type="submit" class="notion-button" onclick="return confirm('–£–¥–∞–ª–∏—Ç—å –º–æ–¥–µ–ª—å?')">
                                <i data-feather="trash-2"></i>
                            </button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
        <p class="empty-state">–ú–æ–¥–µ–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>
        {% endif %}
    </div>
</div>
{% endblock %}